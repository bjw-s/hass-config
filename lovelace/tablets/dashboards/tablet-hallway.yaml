background: var(--background-image)
button_card_templates: !include ../button_card_templates.yaml

sidebar:
  digitalClock: true
  date: true
  sidebarMenu:
    - action: navigate
      navigation_path: "/tablet-hallway/overview"
      name: "Overview"
      active: true
      icon: mdi:home
    - action: navigate
      navigation_path: "/tablet-hallway/lights"
      name: "Lights"
      active: true
      icon: mdi:lamps
    - action: navigate
      navigation_path: "/tablet-hallway/trash"
      name: "Trash"
      active: false
      icon: mdi:trash-can
  template: |
    <li>
      {% if states('sensor.system_time_of_day').endswith('night') %} Good night {{'\U0001F634'}}
      {% elif states('sensor.system_time_of_day').endswith('morning') %} Good morning {{'\u2615\uFE0F'}}
      {% elif states('sensor.system_time_of_day').endswith('afternoon') %} Good afternoon {{'\U0001F44B\U0001F3FB'}}
      {% elif states('sensor.system_time_of_day').endswith('evening') %} Good evening {{'\U0001F44B\U0001F3FB'}}
      {% endif %}
    </li>

    {% if not is_state('sensor.afvalwijzer_today', 'Geen') %} <li>{{'\U0000267B'}} Trash today: {{ states('sensor.afvalwijzer_today') }} </li> {% endif %}
    {% if not is_state('sensor.afvalwijzer_tomorrow', 'Geen') %} <li>{{'\U0000267B'}} Trash tomorrow: {{ states('sensor.afvalwijzer_tomorrow') }} </li> {% endif %}

views:
  - title: Overview
    path: overview
    type: custom:layout-card
    layout_type: 'custom:grid-layout'
    layout:
      grid-template-columns: 100%
      grid-template-rows: 6vh repeat(2, fit-content(100%)) 0fr
      grid-template-areas: |
        "."
        "row1"
        "row2"
        "row3"
        "."
    cards:
      - type: custom:layout-card
        layout_type: 'custom:grid-layout'
        view_layout:
          grid-area: row1
        layout:
          grid-template-columns: 35% 30% 35%
          grid-template-rows: auto
          grid-template-areas: |
            ". row1_1 ."
        cards:
          - type: 'custom:button-card'
            entity: alarm_control_panel.house
            name: Alarm
            show_label: true
            show_state: true
            view_layout:
              grid-area: row1_1
            aspect_ratio: '1/1'
            card_size: 5
            state:
              - icon: 'mdi:shield-check'
                styles:
                  icon:
                    - color: var(--label-badge-green)
                value: disarmed
              - icon: 'mdi:shield-lock'
                styles:
                  icon:
                    - color: var(--label-badge-red)
                operator: regex
                value: armed_.*
              - icon: 'mdi:shield-lock'
                styles:
                  icon:
                    - color: var(--label-badge-yellow)
                value: pending
              - icon: 'mdi:shield-lock'
                styles:
                  icon:
                    - color: var(--label-badge-yellow)
                value: arming
            tap_action: !include ../popups/alarm.yaml

      - type: custom:layout-card
        layout_type: 'custom:grid-layout'
        view_layout:
          grid-area: row2
        layout:
          grid-template-columns: 27.5% 15% 15% 15% 27.5%
          grid-template-rows: auto
          grid-template-areas: |
            ". row2_1 row2_2 row2_3 ."
        cards:
          - type: 'custom:button-card'
            view_layout:
              grid-area: row2_1
            entity: input_boolean.home_modes_bedtime_mode
            name: Bedtime
            aspect_ratio: '1/1'
            show_label: true
            show_state: true
            state:
              - color: var(--disabled-text-color)
                icon: 'mdi:sleep'
                value: 'on'
              - color: var(--disabled-text-color)
                icon: 'mdi:sleep-off'
                value: 'off'
            confirmation:
              text: |
                [[[
                  if (entity.state == 'on')
                    return 'Are you sure you want to turn off bedtime mode?';
                  else
                    return 'Are you sure you want to turn on bedtime mode?';
                ]]]

          - type: 'custom:button-card'
            view_layout:
              grid-area: row2_2
            entity: switch.doorbell_chime_muted
            icon: 'mdi:robot-vacuum'
            name: Doorbell
            aspect_ratio: '1/1'
            show_label: true
            show_state: false
            confirmation:
              text: |
                [[[
                  if (entity.state == 'off')
                    return 'Are you sure you want to turn off doorbell audio?';
                  else
                    return 'Are you sure you want to turn on doorbell audio?';
                ]]]
            state:
              - color: var(--disabled-text-color)
                icon: 'mdi:volume-off'
                label: Silent
                value: 'on'
              - icon: 'mdi:volume-high'
                label: 'On'
                value: 'off'

          - type: 'custom:button-card'
            view_layout:
              grid-area: row2_3
            entity: vacuum.valetudo_livingroom
            icon: 'mdi:robot-vacuum'
            name: MiMi
            aspect_ratio: '1/1'
            show_label: true
            show_state: true
            state:
              - color: var(--disabled-text-color)
                value: docked
              - spin: true
                value: cleaning
            tap_action:
              action: call-service
              service: |
                [[[
                  if (entity.state === "docked")
                    return "script.vacuum_downstairs";
                  else if (entity.state === "idle")
                    return "vacuum.return_to_base";
                  else if (entity.state === "cleaning")
                    return "vacuum.return_to_base";
                  else
                    return "none";
                ]]]
              service_data:
                entity_id: vacuum.valetudo_livingroom
            triggers_update:
              - vacuum.valetudo_livingroom

  - title: Lights
    path: lights
    badges: []


  - title: Trash
    path: trash
    badges: []
    type: custom:layout-card
    layout_type: 'custom:grid-layout'
    layout:
      grid-template-columns: 100%
      grid-template-rows: 6vh repeat(2, fit-content(100%)) 0fr
      grid-template-areas: |
        "."
        "row1"
        "row2"
        "."
    cards:
      - type: custom:layout-card
        layout_type: 'custom:grid-layout'
        view_layout:
          grid-area: row1
        layout:
          grid-template-columns: 15% 23.3% 23.3% 23.3% 15%
          grid-template-rows: auto
          grid-template-areas: |
            ". row1_1 row1_2 row1_3 ."
        cards:
          - type: 'custom:button-card'
            view_layout:
              grid-area: row1_1
            entity: sensor.afvalwijzer_restafval
            icon: 'mdi:trash-can'
            name: Restafval
            template: trash_button
            triggers_update:
              - sensor.afvalwijzer_restafval
              - input_boolean.trash_outside

          - type: 'custom:button-card'
            view_layout:
              grid-area: row1_2
            entity: sensor.afvalwijzer_gft
            icon: 'mdi:leaf'
            name: GFT
            template: trash_button
            triggers_update:
              - sensor.afvalwijzer_gft
              - input_boolean.trash_gft_afval_outside

          - type: 'custom:button-card'
            view_layout:
              grid-area: row1_3
            entity: sensor.afvalwijzer_pmd
            icon: 'mdi:recycle'
            name: PMD
            template: trash_button
            triggers_update:
              - sensor.afvalwijzer_pmd
              - input_boolean.trash_pmd_outside

      - type: custom:layout-card
        layout_type: 'custom:grid-layout'
        view_layout:
          grid-area: row2
        layout:
          grid-template-columns: 15% 23.3% 23.3% 23.3% 15%
          grid-template-rows: auto
          grid-template-areas: |
            ". row2_1 row2_2 row2_3 ."
        cards:
          - type: 'custom:button-card'
            view_layout:
              grid-area: row2_1
            entity: sensor.afvalwijzer_papier
            icon: 'mdi:package-variant'
            name: Papier
            template: trash_button
            triggers_update:
              - sensor.afvalwijzer_papier
              - input_boolean.trash_oud_papier_outside

          - type: 'custom:button-card'
            view_layout:
              grid-area: row2_2
            entity: sensor.afvalwijzer_takken
            icon: 'mdi:sprout'
            name: Snoeiafval
            template: trash_button
            triggers_update:
              - sensor.afvalwijzer_takken
              - input_boolean.trash_snoeiafval_outside
            variables:
              days_orange: 14
