title: Home
icon: "mdi:home"
id: home
path: home
badges: []
type: "custom:grid-layout"
layout:
  #default
  grid-column-gap: var(--custom-layout-card-padding)
  grid-template-columns: 0 repeat(3, 1fr) 0
  grid-template-rows: auto

  grid-template-areas: |
    ". presence  glance  trash ."
    ". presence  modes   trash ."

  mediaquery:
    #phone
    "(max-width: 800px)":
      grid-template-columns: 0 repeat(1, 1fr) 0
      grid-template-areas: |
        ".       presence    ."
        ".       glance      ."
        ".       modes       ."
        ".       trash       ."

    #tablet portrait
    "(max-width: 1000px)":
      grid-template-columns: 0 repeat(2, 1fr) 0
      grid-template-areas: |
        ".       presence  modes    ."
        ".       glance    trash    ."

cards:
  #################################################
  #                                               #
  #                   PRESENCE                    #
  #                                               #
  #################################################

  # Large variant
  - type: vertical-stack
    title: Presence
    view_layout:
      grid-area: presence
      show:
        mediaquery: "(min-width: 800px)"
    cards:
      - type: custom:mushroom-alarm-control-panel-card
        entity: alarm_control_panel.house
        layout: vertical
        states:
          - armed_home
          - armed_night
          - armed_away
        tap_action: !include ../popups/alarm.yaml

      - type: horizontal-stack
        cards:
          - type: custom:mushroom-person-card
            entity: person.bernd
            use_entity_picture: true
            layout: vertical

          - type: custom:mushroom-person-card
            entity: person.man_yie
            use_entity_picture: true
            layout: vertical

  # Small variant
  - type: vertical-stack
    title: Presence
    view_layout:
      grid-area: presence
      show:
        mediaquery: "(max-width: 800px)"
    cards:
      - type: custom:mushroom-alarm-control-panel-card
        entity: alarm_control_panel.house
        layout: auto
        show_keypad: false
        states:
          - armed_home
          - armed_night
          - armed_away
        tap_action: !include ../popups/alarm.yaml

      - type: custom:mushroom-person-card
        entity: person.bernd
        use_entity_picture: true
        layout: horizontal

      - type: custom:mushroom-person-card
        entity: person.man_yie
        use_entity_picture: true
        layout: horizontal

  #################################################
  #                                               #
  #                    GLANCE                     #
  #                                               #
  #################################################

  - type: vertical-stack
    title: At a glance
    view_layout:
      grid-area: glance
    cards:
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: switch.hallway_doorbell_chime_muted
            name: Doorbell?
            icon: |
              {% if is_state('switch.hallway_doorbell_chime_muted', 'on') %}
                mdi:bell-cancel
              {% else %}
                mdi:bell
              {% endif %}
            icon_color: |
              {% if is_state('switch.hallway_doorbell_chime_muted', 'on') %}
                orange
              {% endif %}
            primary: Doorbell
            secondary: |
              {% if is_state('switch.hallway_doorbell_chime_muted', 'on') %}
                Silent
              {% else %}
                On
              {% endif %}
            layout: horizontal

          - type: custom:mushroom-vacuum-card
            entity: vacuum.valetudo_livingroom
            name: MiMi

          - type: custom:mushroom-vacuum-card
            entity: vacuum.valetudo_upstairs
            name: Mickey

      - type: horizontal-stack
        cards:
          - type: custom:mushroom-climate-card
            name: Thermostat living room
            entity: climate.living_room
            hvac_modes: []
            show_temperature_control: false
            fill_container: true
            tap_action:
              action: navigate
              navigation_path: temperatures

          - type: 'custom:vertical-stack-in-card'
            cards:
              - type: custom:mushroom-template-card
                primary: Power usage
                secondary: |-
                  {{ states(entity) }} W
                icon: mdi:home-lightning-bolt
                entity: sensor.dsmr_reading_electricity_currently_delivered_watt

              - type: custom:mini-graph-card
                entities:
                  - entity: sensor.dsmr_reading_electricity_currently_delivered_watt
                    color: orange
                group: true
                show:
                  icon: false
                  name: false
                  state: false
                  graph: bar
                hours_to_show: 3
                points_per_hour: 12

  #################################################
  #                                               #
  #                     MODES                     #
  #                                               #
  #################################################

  - type: vertical-stack
    title: Modes
    view_layout:
      grid-area: modes
    cards:
      - type: grid
        columns: 2
        cards:
          - type: vertical-stack
            cards:
              - type: custom:restriction-card
                card:
                  type: custom:mushroom-entity-card
                  entity: input_boolean.home_modes_guest_mode
                  name: Guest
                  icon: mdi:human-handsup
                  layout: horizontal
                  tap_action:
                    action: toggle

              - type: custom:restriction-card
                card:
                  type: custom:mushroom-entity-card
                  entity: input_boolean.home_modes_vacation_mode
                  name: Vacation
                  icon: mdi:airplane
                  layout: horizontal
                  tap_action:
                    action: toggle

          - type: vertical-stack
            cards:
              - type: custom:restriction-card
                card:
                  type: custom:mushroom-entity-card
                  entity: input_boolean.home_modes_bedtime_mode
                  name: Bedtime
                  icon: mdi:sleep
                  layout: horizontal
                  tap_action:
                    action: toggle

  #################################################
  #                                               #
  #                     TRASH                     #
  #                                               #
  #################################################

  - type: vertical-stack
    title: Trash
    view_layout:
      grid-area: trash
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.afvalwijzer_restafval
        name: Restafval
        primary_info: name
        secondary_info: state
        icon: mdi:trash-can
        layout: horizontal

      - type: custom:mushroom-entity-card
        entity: sensor.afvalwijzer_gft
        name: GFT
        primary_info: name
        secondary_info: state
        icon: mdi:leaf
        layout: horizontal

      - type: custom:mushroom-entity-card
        entity: sensor.afvalwijzer_pmd
        name: PMD
        primary_info: name
        secondary_info: state
        icon: mdi:recycle
        layout: horizontal

      - type: custom:mushroom-entity-card
        entity: sensor.afvalwijzer_papier
        name: Papier
        primary_info: name
        secondary_info: state
        icon: mdi:package-variant
        layout: horizontal
