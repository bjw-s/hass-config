---
platform: template
sensors:
  bedroom_shock_sensor_left_motion:
    friendly_name: "name: Bedroom - Shock Sensor Left Motion"
    value_template:  >
      {% set entity = 'sensor.bedroom_shock_sensor_left_action' %}
      {% set action = state_attr(entity, 'action') %}
      {% if states[entity] %}
        {% set last_changed = as_timestamp(states[entity].last_changed) %}
      {% else %}
        {% set last_changed = 0 %}
      {% endif %}
      {{-
        action == 'tilt'
        or
        action == 'vibration'
        or
        (
          action == None
          and
          (
            (as_timestamp(now()) - last_changed) | round(0)
          ) < 300
        )
      -}}
