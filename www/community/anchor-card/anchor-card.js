(()=>{"use strict";var e,n,t,o,i,r,_,l={},c=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(e,n){for(var t in n)e[t]=n[t];return e}function u(e){var n=e.parentNode;n&&n.removeChild(e)}function h(e,o,i,r,_){var l={type:e,props:o,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==_?++t:_};return null==_&&null!=n.vnode&&n.vnode(l),l}function d(e){return e.children}function p(e,n){this.props=e,this.context=n}function f(e,n){if(null==n)return e.__?f(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return"function"==typeof e.type?f(e):null}function v(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return v(e)}}function m(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!g.__r++||r!==n.debounceRendering)&&((r=n.debounceRendering)||i)(g)}function g(){for(var e;g.__r=o.length;)e=o.sort((function(e,n){return e.__v.__b-n.__v.__b})),o=[],e.some((function(e){var n,t,o,i,r,_;e.__d&&(r=(i=(n=e).__v).__e,(_=n.__P)&&(t=[],(o=s({},i)).__v=i.__v+1,L(_,i,o,n.__n,void 0!==_.ownerSVGElement,null!=i.__h?[r]:null,t,null==r?f(i):r,i.__h),T(t,i),i.__e!=r&&v(i)))}))}function y(e,n,t,o,i,r,_,a,s,u){var p,v,m,g,y,k,E,x=o&&o.__k||c,C=x.length;for(t.__k=[],p=0;p<n.length;p++)if(null!=(g=t.__k[p]=null==(g=n[p])||"boolean"==typeof g?null:"string"==typeof g||"number"==typeof g||"bigint"==typeof g?h(null,g,null,null,g):Array.isArray(g)?h(d,{children:g},null,null,null):g.__b>0?h(g.type,g.props,g.key,null,g.__v):g)){if(g.__=t,g.__b=t.__b+1,null===(m=x[p])||m&&g.key==m.key&&g.type===m.type)x[p]=void 0;else for(v=0;v<C;v++){if((m=x[v])&&g.key==m.key&&g.type===m.type){x[v]=void 0;break}m=null}L(e,g,m=m||l,i,r,_,a,s,u),y=g.__e,(v=g.ref)&&m.ref!=v&&(E||(E=[]),m.ref&&E.push(m.ref,null,g),E.push(v,g.__c||y,g)),null!=y?(null==k&&(k=y),"function"==typeof g.type&&g.__k===m.__k?g.__d=s=w(g,s,e):s=b(e,g,m,x,y,s),"function"==typeof t.type&&(t.__d=s)):s&&m.__e==s&&s.parentNode!=e&&(s=f(m))}for(t.__e=k,p=C;p--;)null!=x[p]&&("function"==typeof t.type&&null!=x[p].__e&&x[p].__e==t.__d&&(t.__d=f(o,p+1)),A(x[p],x[p]));if(E)for(p=0;p<E.length;p++)H(E[p],E[++p],E[++p])}function w(e,n,t){for(var o,i=e.__k,r=0;i&&r<i.length;r++)(o=i[r])&&(o.__=e,n="function"==typeof o.type?w(o,n,t):b(t,o,o,i,o.__e,n));return n}function b(e,n,t,o,i,r){var _,l,c;if(void 0!==n.__d)_=n.__d,n.__d=void 0;else if(null==t||i!=r||null==i.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(i),_=null;else{for(l=r,c=0;(l=l.nextSibling)&&c<o.length;c+=2)if(l==i)break e;e.insertBefore(i,r),_=r}return void 0!==_?_:i.nextSibling}function k(e,n,t){"-"===n[0]?e.setProperty(n,t):e[n]=null==t?"":"number"!=typeof t||a.test(n)?t:t+"px"}function E(e,n,t,o,i){var r;e:if("style"===n)if("string"==typeof t)e.style.cssText=t;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(n in o)t&&n in t||k(e.style,n,"");if(t)for(n in t)o&&t[n]===o[n]||k(e.style,n,t[n])}else if("o"===n[0]&&"n"===n[1])r=n!==(n=n.replace(/Capture$/,"")),n=n.toLowerCase()in e?n.toLowerCase().slice(2):n.slice(2),e.l||(e.l={}),e.l[n+r]=t,t?o||e.addEventListener(n,r?C:x,r):e.removeEventListener(n,r?C:x,r);else if("dangerouslySetInnerHTML"!==n){if(i)n=n.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==n&&"list"!==n&&"form"!==n&&"tabIndex"!==n&&"download"!==n&&n in e)try{e[n]=null==t?"":t;break e}catch(e){}"function"==typeof t||(null!=t&&(!1!==t||"a"===n[0]&&"r"===n[1])?e.setAttribute(n,t):e.removeAttribute(n))}}function x(e){this.l[e.type+!1](n.event?n.event(e):e)}function C(e){this.l[e.type+!0](n.event?n.event(e):e)}function L(e,t,o,i,r,_,l,c,a){var u,h,f,v,m,g,w,b,k,E,x,C=t.type;if(void 0!==t.constructor)return null;null!=o.__h&&(a=o.__h,c=t.__e=o.__e,t.__h=null,_=[c]),(u=n.__b)&&u(t);try{e:if("function"==typeof C){if(b=t.props,k=(u=C.contextType)&&i[u.__c],E=u?k?k.props.value:u.__:i,o.__c?w=(h=t.__c=o.__c).__=h.__E:("prototype"in C&&C.prototype.render?t.__c=h=new C(b,E):(t.__c=h=new p(b,E),h.constructor=C,h.render=P),k&&k.sub(h),h.props=b,h.state||(h.state={}),h.context=E,h.__n=i,f=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=C.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=s({},h.__s)),s(h.__s,C.getDerivedStateFromProps(b,h.__s))),v=h.props,m=h.state,f)null==C.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==C.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,E),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,E)||t.__v===o.__v){h.props=b,h.state=h.__s,t.__v!==o.__v&&(h.__d=!1),h.__v=t,t.__e=o.__e,t.__k=o.__k,t.__k.forEach((function(e){e&&(e.__=t)})),h.__h.length&&l.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,E),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(v,m,g)}))}h.context=E,h.props=b,h.state=h.__s,(u=n.__r)&&u(t),h.__d=!1,h.__v=t,h.__P=e,u=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&&(i=s(s({},i),h.getChildContext())),f||null==h.getSnapshotBeforeUpdate||(g=h.getSnapshotBeforeUpdate(v,m)),x=null!=u&&u.type===d&&null==u.key?u.props.children:u,y(e,Array.isArray(x)?x:[x],t,o,i,r,_,l,c,a),h.base=t.__e,t.__h=null,h.__h.length&&l.push(h),w&&(h.__E=h.__=null),h.__e=!1}else null==_&&t.__v===o.__v?(t.__k=o.__k,t.__e=o.__e):t.__e=S(o.__e,t,o,i,r,_,l,a);(u=n.diffed)&&u(t)}catch(e){t.__v=null,(a||null!=_)&&(t.__e=c,t.__h=!!a,_[_.indexOf(c)]=null),n.__e(e,t,o)}}function T(e,t){n.__c&&n.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){n.__e(e,t.__v)}}))}function S(n,t,o,i,r,_,c,a){var s,h,d,p=o.props,v=t.props,m=t.type,g=0;if("svg"===m&&(r=!0),null!=_)for(;g<_.length;g++)if((s=_[g])&&"setAttribute"in s==!!m&&(m?s.localName===m:3===s.nodeType)){n=s,_[g]=null;break}if(null==n){if(null===m)return document.createTextNode(v);n=r?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,v.is&&v),_=null,a=!1}if(null===m)p===v||a&&n.data===v||(n.data=v);else{if(_=_&&e.call(n.childNodes),h=(p=o.props||l).dangerouslySetInnerHTML,d=v.dangerouslySetInnerHTML,!a){if(null!=_)for(p={},g=0;g<n.attributes.length;g++)p[n.attributes[g].name]=n.attributes[g].value;(d||h)&&(d&&(h&&d.__html==h.__html||d.__html===n.innerHTML)||(n.innerHTML=d&&d.__html||""))}if(function(e,n,t,o,i){var r;for(r in t)"children"===r||"key"===r||r in n||E(e,r,null,t[r],o);for(r in n)i&&"function"!=typeof n[r]||"children"===r||"key"===r||"value"===r||"checked"===r||t[r]===n[r]||E(e,r,n[r],t[r],o)}(n,v,p,r,a),d)t.__k=[];else if(g=t.props.children,y(n,Array.isArray(g)?g:[g],t,o,i,r&&"foreignObject"!==m,_,c,_?_[0]:o.__k&&f(o,0),a),null!=_)for(g=_.length;g--;)null!=_[g]&&u(_[g]);a||("value"in v&&void 0!==(g=v.value)&&(g!==n.value||"progress"===m&&!g||"option"===m&&g!==p.value)&&E(n,"value",g,p.value,!1),"checked"in v&&void 0!==(g=v.checked)&&g!==n.checked&&E(n,"checked",g,p.checked,!1))}return n}function H(e,t,o){try{"function"==typeof e?e(t):e.current=t}catch(e){n.__e(e,o)}}function A(e,t,o){var i,r;if(n.unmount&&n.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||H(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){n.__e(e,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&A(i[r],t,"function"!=typeof e.type);o||null==e.__e||u(e.__e),e.__e=e.__d=void 0}function P(e,n,t){return this.constructor(e,t)}function U(t,o,i){var r,_,c;n.__&&n.__(t,o),_=(r="function"==typeof i)?null:i&&i.__k||o.__k,c=[],L(o,t=(!r&&i||o).__k=function(n,t,o){var i,r,_,l={};for(_ in t)"key"==_?i=t[_]:"ref"==_?r=t[_]:l[_]=t[_];if(arguments.length>2&&(l.children=arguments.length>3?e.call(arguments,2):o),"function"==typeof n&&null!=n.defaultProps)for(_ in n.defaultProps)void 0===l[_]&&(l[_]=n.defaultProps[_]);return h(n,l,i,r,null)}(d,null,[t]),_||l,l,void 0!==o.ownerSVGElement,!r&&i?[i]:_?null:o.firstChild?e.call(o.childNodes):null,c,!r&&i?i:_?_.__e:o.firstChild,r),T(c,t)}function D(e,n){var t={__c:n="__cC"+_++,__:e,Consumer:function(e,n){return e.children(n)},Provider:function(e){var t,o;return this.getChildContext||(t=[],(o={})[n]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(m)},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}};return t.Provider.__=t.Consumer.contextType=t}e=c.slice,n={__e:function(e,n){for(var t,o,i;n=n.__;)if((t=n.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(e)),i=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(e),i=t.__d),i)return t.__E=t}catch(n){e=n}throw e}},t=0,p.prototype.setState=function(e,n){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),"function"==typeof e&&(e=e(s({},t),this.props)),e&&s(t,e),null!=e&&this.__v&&(n&&this.__h.push(n),m(this))},p.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),m(this))},p.prototype.render=d,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,_=0;var F=0;function R(e,t,o,i,r){var _,l,c={};for(l in t)"ref"==l?_=t[l]:c[l]=t[l];var a={type:e,props:c,key:o,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--F,__source:i,__self:r};if("function"==typeof e&&(_=e.defaultProps))for(l in _)void 0===c[l]&&(c[l]=_[l]);return n.vnode&&n.vnode(a),a}var B,I,M,N=0,W=[],O=n.__b,$=n.__r,q=n.diffed,z=n.__c,Y=n.unmount;function j(e,t){n.__h&&n.__h(I,e,N||t),N=0;var o=I.__H||(I.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function G(e){var n=I.context[e.__c],t=j(B++,9);return t.c=e,n?(null==t.__&&(t.__=!0,n.sub(I)),n.props.value):e.__}function V(){for(var e;e=W.shift();)if(e.__P)try{e.__H.__h.forEach(K),e.__H.__h.forEach(Q),e.__H.__h=[]}catch(t){e.__H.__h=[],n.__e(t,e.__v)}}n.__b=function(e){I=null,O&&O(e)},n.__r=function(e){$&&$(e),B=0;var n=(I=e.__c).__H;n&&(n.__h.forEach(K),n.__h.forEach(Q),n.__h=[])},n.diffed=function(e){q&&q(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==W.push(t)&&M===n.requestAnimationFrame||((M=n.requestAnimationFrame)||function(e){var n,t=function(){clearTimeout(o),J&&cancelAnimationFrame(n),setTimeout(e)},o=setTimeout(t,100);J&&(n=requestAnimationFrame(t))})(V)),I=null},n.__c=function(e,t){t.some((function(e){try{e.__h.forEach(K),e.__h=e.__h.filter((function(e){return!e.__||Q(e)}))}catch(o){t.some((function(e){e.__h&&(e.__h=[])})),t=[],n.__e(o,e.__v)}})),z&&z(e,t)},n.unmount=function(e){Y&&Y(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach((function(e){try{K(e)}catch(e){t=e}})),t&&n.__e(t,o.__v))};var J="function"==typeof requestAnimationFrame;function K(e){var n=I,t=e.__c;"function"==typeof t&&(e.__c=void 0,t()),I=n}function Q(e){var n=I;e.__c=e.__(),I=n}function X(e,n){return!e||e.length!==n.length||n.some((function(n,t){return n!==e[t]}))}const Z=D(void 0),ee=D(void 0),ne=({hass:e,children:n})=>R(Z.Provider,{value:e,children:n},void 0),te=({config:e,children:n})=>R(ee.Provider,{value:e,children:n},void 0),oe=({schema:e,computeLabel:t,configChanged:o})=>{const i=G(Z),r=G(ee),_=(N=5,function(e,n){var t=j(B++,7);return X(t.__H,n)&&(t.__=e(),t.__H=n,t.__h=e),t.__}((function(){return{current:null}}),[]));return function(l,c){var a=j(B++,3);!n.__s&&X(a.__H,c)&&(a.__=()=>{const n=document.createElement("ha-form");return n.hass=i,n.data=r,n.schema=e,n.computeLabel=t,n.addEventListener("value-changed",o),_.current&&_.current.appendChild(n),()=>{n.removeEventListener("value-changed",o)}},a.__H=c,I.__H.__h.push(a))}(0,[]),R("div",{ref:_},void 0)},ie="anchor-card",re="anchor-card-editor";class _e extends HTMLElement{constructor(){super(),this.scrollToAnchor=this.scrollToAnchor.bind(this)}static getConfigElement(){return document.createElement(re)}static getStubConfig(){return{anchor_id:"example",negative_margin:13,timeout:50,offset:0,transition:0}}config;anchorReplacementElement=null;replacementIsOnTop=!1;checkLocationChange=function(e,n=100){let t;return(...o)=>{clearTimeout(t),t=setTimeout((()=>{e.apply(this,o)}),n)}}((()=>{window.location.search.includes("edit=1")||window.dispatchEvent(new Event("locationchange"))}),100);scrollToAnchor(){requestAnimationFrame((()=>{const e=this.config.anchor_id,n=new URLSearchParams(window.location.search);if(n.get("anchor")===e){setTimeout((()=>{const e=this.anchorReplacementElement?this.anchorReplacementElement.getBoundingClientRect():this.getBoundingClientRect(),n=this.config.offset||0,t=window.scrollY||document.documentElement.scrollTop;this.config.transition?function(e,n){const t=window.scrollY,o=e-t;let i=null;requestAnimationFrame((function e(r){null===i&&(i=r);const _=r-i,l=function(e,n,t,o){return(e/=o/2)<1?t/2*e*e+n:-t/2*(--e*(e-2)-1)+n}(_,t,o,n);window.scrollTo(0,l),_<n&&requestAnimationFrame(e)}))}(e.top+t+n+(this.replacementIsOnTop?e.height:0),this.config.transition):window.scrollTo({top:e.top+t+n+(this.replacementIsOnTop?e.height:0),behavior:"smooth"})}),this.config.timeout||50),n.delete("anchor");const e=`${window.location.protocol}//${window.location.host}${window.location.pathname}${n.size?"?":""}${n}`;window.history.replaceState({},"",e)}}))}connectedCallback(){setTimeout((()=>{const e=this.parentElement;e&&(e.style.height="0px",e.style.maxHeight="0px")}),10),setTimeout((()=>{const e=this.parentElement.parentElement;e&&e.classList.contains("card")&&e.parentElement.classList.contains("container")&&(e.style.visibility="hidden",e.style.position="absolute",e.nextElementSibling?this.anchorReplacementElement=e.nextElementSibling:e.previousElementSibling&&(this.anchorReplacementElement=e.previousElementSibling,this.replacementIsOnTop=!0))}),10),(()=>{const e=window.history.pushState;window.history.pushState=function(...n){const t=e.apply(this,n);return window.dispatchEvent(new Event("pushstate")),t};const n=window.history.replaceState;window.history.replaceState=function(...e){const t=n.apply(this,e);return window.dispatchEvent(new Event("replacestate")),t},window.addEventListener("popstate",this.checkLocationChange),window.addEventListener("pushstate",this.checkLocationChange),window.addEventListener("replacestate",this.checkLocationChange)})(),window.addEventListener("locationchange",this.scrollToAnchor),window.dispatchEvent(new Event("locationchange"))}disconnectedCallback(){window.removeEventListener("locationchange",this.scrollToAnchor),window.removeEventListener("popstate",this.checkLocationChange),window.removeEventListener("pushstate",this.checkLocationChange),window.removeEventListener("replacestate",this.checkLocationChange)}setConfig(e){this.config=e,this._render()}_render=()=>{U(R(d,{children:R("ha-card",{style:{margin:`-${this.config.negative_margin||13}px 0`,borderWidth:"0px",maxHeight:"0px",height:"0px",transform:"scale(0)"}},void 0)},void 0),this)};getCardSize(){return 1}}class le extends HTMLElement{_config;_hass;usedBackoutBefore=!1;set hass(e){this._hass=e}setConfig(e){if(void 0===e.anchor_id||void 0===e.negative_margin||void 0===e.timeout||void 0===e.offset||void 0===e.transition||void 0!==e.backout||void 0!==e.disable_in_edit_mode){void 0!==e.backout&&(this.usedBackoutBefore=!0),e={anchor_id:"example",negative_margin:13,timeout:50,offset:0,transition:0,...e,backout:void 0,disable_in_edit_mode:void 0};const n=new CustomEvent("config-changed",{detail:{config:e},bubbles:!0,composed:!0});this.dispatchEvent(n)}this._config=e,this._render()}configChanged(e){const n=Object.assign({},this._config);n.anchor_id=e.detail.value.anchor_id,n.negative_margin=e.detail.value.negative_margin,n.timeout=e.detail.value.timeout,n.offset=e.detail.value.offset,n.transition=e.detail.value.transition,this._config=n;const t=new CustomEvent("config-changed",{detail:{config:n},bubbles:!0,composed:!0});this.dispatchEvent(t),this._render()}computeLabel(e){return{anchor_id:"Anchor ID",negative_margin:"Negative Margin",timeout:"Timeout (wait time before scrolling)",offset:"Offset (scroll offset)",transition:"Transition (scroll duration, set to 0 for default smooth scroll, otherwise do not set values <10)"}[e.name]||e.name}_render=()=>{U(R(d,{children:R(ne,{hass:this._hass,children:R(te,{config:this._config,children:[R("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"12px"},children:[R("span",{children:"Set a per-page unique anchor ID to this card."},void 0),R("span",{children:"To scroll to this anchor, navigate to it with a URL param via another card/action, example:"},void 0),R("code",{style:{backgroundColor:"#00000050",padding:"4px 8px",borderRadius:"4px"},children:"/lovelace/lights?anchor=kitchen"},void 0),R("div",{style:{backgroundColor:"#00000050",padding:"4px 8px",borderRadius:"4px",whiteSpace:"pre-wrap",fontFamily:"monospace"},children:R("span",{children:["tap_action:","\n","  ","action: navigate","\n","  ","navigation_path: /lovelace/lights?anchor=kitchen","\n","  ","navigation_replace: true"]},void 0)},void 0)]},void 0),R(oe,{schema:[{name:"anchor_id",selector:{text:{}}},{name:"negative_margin",selector:{number:{min:-100,max:100,step:5}}},{name:"timeout",selector:{number:{min:0,max:1e3,step:10}}},{name:"offset",selector:{number:{min:-500,max:500,step:10}}},{name:"transition",selector:{number:{min:0,max:2e3,step:50}}}],computeLabel:this.computeLabel,configChanged:this.configChanged.bind(this)},void 0),R("p",{children:["*",this.usedBackoutBefore?R(d,{children:[R("b",{style:{color:"red"},children:["You used ",R("code",{children:"backout"},void 0)," on this card, check this section:"]},void 0),R("br",{},void 0)]},void 0):"","If you navigate within the same page, use the"," ",R("a",{href:"https://www.home-assistant.io/dashboards/actions/#navigation_replace",children:"navigation_replace"},void 0)," ","option on your navigation action to prevent having to go back multiple times to reach the previous page."]},void 0),R("p",{children:["*If you use the Sections view and want to edit this card, refresh the page"," ",R("b",{style:{color:"red"},children:"when already in edit mode"},void 0)," ","(that's the only way to make it appear)."]},void 0)]},void 0)},void 0)},void 0),this)}}customElements.define(ie,_e),customElements.define(re,le),window.customCards=window.customCards||[],window.customCards.push({type:ie,name:"Anchor Card",preview:!1,description:"A card that acts as a scroll anchor"})})();